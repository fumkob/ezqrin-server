# ezQRin Server - Environment Variables Example
#
# Copy this file to .env and fill in your values.
# For production, use .env.secrets for sensitive credentials.
#
# IMPORTANT: Never commit files containing real secrets to version control.
#
# Configuration priority (highest to lowest):
#   1. Environment variables (this file / system env)
#   2. config/production.yaml or config/development.yaml
#   3. config/default.yaml

# ==============================================================================
# Server Configuration
# ==============================================================================

# HTTP server port
# Default: 8080
SERVER_PORT=8080

# Application environment
# Options: development, production
# Default: development
SERVER_ENV=development

# ==============================================================================
# Database Configuration
# ==============================================================================

# PostgreSQL host
# DevContainer: postgres (service name)
# Local:        localhost
# Default: localhost
DB_HOST=localhost

# PostgreSQL port
# Default: 5432
DB_PORT=5432

# Database name
# Default: ezqrin_db
DB_NAME=ezqrin_db

# Database username (sensitive)
# REQUIRED - no default
DB_USER=your-database-user

# Database password (sensitive)
# REQUIRED - no default
# Generate with: openssl rand -base64 32
DB_PASSWORD=your-secure-database-password

# SSL mode for database connection
# Options: disable, require, verify-ca, verify-full
# Production should use: require
# Default: disable
DB_SSL_MODE=disable

# Maximum number of database connections in pool
# Default: 25
# DB_MAX_CONNS=25

# Minimum number of idle database connections
# Default: 5
# DB_MIN_CONNS=5

# Maximum lifetime of a database connection (Go duration format)
# Default: 1h
# DB_MAX_CONN_LIFETIME=1h

# Maximum idle time for a database connection before closing
# Default: 30m
# DB_MAX_CONN_IDLE_TIME=30m

# ==============================================================================
# Redis Configuration
# ==============================================================================

# Redis host
# DevContainer: redis (service name)
# Local:        localhost
# Default: localhost
REDIS_HOST=localhost

# Redis port
# Default: 6379
REDIS_PORT=6379

# Redis database index (0-15)
# Default: 0
REDIS_DB=0

# Redis password (sensitive, optional)
# Leave empty if Redis has no password configured
REDIS_PASSWORD=

# Redis connection pool size
# Default: 10
# REDIS_POOL_SIZE=10

# Minimum number of idle Redis connections
# Default: 5
# REDIS_MIN_IDLE_CONNS=5

# Maximum number of retries for Redis operations
# Default: 3
# REDIS_MAX_RETRIES=3

# ==============================================================================
# JWT Authentication
# ==============================================================================

# JWT signing secret (sensitive)
# REQUIRED - no default
# CRITICAL: Use a cryptographically secure random string, minimum 32 characters
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE-ME-use-openssl-rand-base64-32-to-generate

# Access token expiration duration (Go duration format)
# Default: 15m
# JWT_ACCESS_TOKEN_EXPIRY=15m

# Refresh token expiration for web clients
# Default: 168h (7 days)
# JWT_REFRESH_TOKEN_EXPIRY_WEB=168h

# Refresh token expiration for mobile clients
# Default: 2160h (90 days)
# JWT_REFRESH_TOKEN_EXPIRY_MOBILE=2160h

# ==============================================================================
# QR Code Configuration
# ==============================================================================

# HMAC secret for signing QR code tokens (sensitive)
# REQUIRED - no default
# CRITICAL: Use a cryptographically secure random string, minimum 32 characters
# Generate with: openssl rand -base64 32
QR_HMAC_SECRET=CHANGE-ME-use-openssl-rand-base64-32-to-generate

# ==============================================================================
# Logging Configuration
# ==============================================================================

# Log level
# Options: debug, info, warn, error, fatal
# Default: info (production), debug (development)
LOG_LEVEL=info

# Log output format
# Options: json (structured), text (human-readable)
# Default: json (production), text (development)
LOG_FORMAT=json

# ==============================================================================
# CORS Configuration
# ==============================================================================

# Allowed origins for CORS requests (comma-separated)
# Example: http://localhost:3000,https://app.ezqrin.com
# Default (development): http://localhost:3000,http://localhost:5173
# CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ==============================================================================
# DevContainer Quick Reference
# ==============================================================================
# If you are using DevContainer (.devcontainer/), you do NOT need this file.
# DevContainer sets all variables automatically via .devcontainer/docker-compose.yaml:
#
#   DB_HOST=postgres
#   DB_PORT=5432
#   DB_USER=ezqrin
#   DB_PASSWORD=ezqrin_dev
#   DB_NAME=ezqrin_db
#   DB_SSL_MODE=disable
#   REDIS_HOST=redis
#   REDIS_PORT=6379
#   JWT_SECRET=dev-secret-key-minimum-32-chars-long-for-development-only
#   QR_HMAC_SECRET=dev-qr-hmac-secret-key-minimum-32-chars-long-for-development-only
#   SERVER_PORT=8080
#   SERVER_ENV=development
#   LOG_LEVEL=debug
#   LOG_FORMAT=text
