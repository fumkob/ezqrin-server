// Package generated provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package generated

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/http"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/gin-gonic/gin"
	"github.com/oapi-codegen/runtime"
	openapi_types "github.com/oapi-codegen/runtime/types"
)

const (
	BearerAuthScopes = "bearerAuth.Scopes"
)

// Defines values for CheckInMethod.
const (
	Manual CheckInMethod = "manual"
	Qrcode CheckInMethod = "qrcode"
)

// Defines values for EventStatus.
const (
	EventStatusCancelled EventStatus = "cancelled"
	EventStatusCompleted EventStatus = "completed"
	EventStatusDraft     EventStatus = "draft"
	EventStatusOngoing   EventStatus = "ongoing"
	EventStatusPublished EventStatus = "published"
)

// Defines values for ParticipantStatus.
const (
	ParticipantStatusCancelled ParticipantStatus = "cancelled"
	ParticipantStatusConfirmed ParticipantStatus = "confirmed"
	ParticipantStatusDeclined  ParticipantStatus = "declined"
	ParticipantStatusTentative ParticipantStatus = "tentative"
)

// Defines values for PaymentStatus.
const (
	Paid   PaymentStatus = "paid"
	Unpaid PaymentStatus = "unpaid"
)

// Defines values for UserRole.
const (
	Admin     UserRole = "admin"
	Organizer UserRole = "organizer"
	Staff     UserRole = "staff"
)

// Defines values for OrderParam.
const (
	OrderParamAsc  OrderParam = "asc"
	OrderParamDesc OrderParam = "desc"
)

// Defines values for GetEventsParamsOrder.
const (
	GetEventsParamsOrderAsc  GetEventsParamsOrder = "asc"
	GetEventsParamsOrderDesc GetEventsParamsOrder = "desc"
)

// AuthResponse defines model for AuthResponse.
type AuthResponse struct {
	// AccessToken JWT access token for API authentication
	AccessToken string `json:"access_token"`

	// ExpiresIn Access token expiration time in seconds (900 = 15 minutes)
	ExpiresIn int `json:"expires_in"`

	// RefreshToken Refresh token for obtaining new access tokens
	RefreshToken string `json:"refresh_token"`

	// TokenType Token type (always "Bearer")
	TokenType string `json:"token_type"`
	User      User   `json:"user"`
}

// CheckIn defines model for CheckIn.
type CheckIn struct {
	// CheckedInAt Check-in timestamp (ISO 8601, default NOW())
	CheckedInAt *time.Time `json:"checked_in_at,omitempty"`

	// CheckedInBy User who performed check-in
	CheckedInBy *struct {
		Id   *openapi_types.UUID `json:"id,omitempty"`
		Name *string             `json:"name,omitempty"`
	} `json:"checked_in_by,omitempty"`

	// CheckinMethod Check-in method
	CheckinMethod CheckInMethod `json:"checkin_method"`

	// DeviceInfo Device metadata (max 5KB JSON)
	DeviceInfo *map[string]interface{} `json:"device_info,omitempty"`

	// EventId Associated event ID
	EventId *openapi_types.UUID `json:"event_id,omitempty"`

	// Id Check-in unique identifier
	Id *openapi_types.UUID `json:"id,omitempty"`

	// ParticipantId Checked-in participant ID
	ParticipantId *openapi_types.UUID `json:"participant_id,omitempty"`
}

// CheckInMethod Check-in method
type CheckInMethod string

// CreateEventRequest defines model for CreateEventRequest.
type CreateEventRequest struct {
	// Description Event description
	Description *string `json:"description,omitempty"`

	// EndDate Event end date and time (ISO 8601, must be after start_date)
	EndDate *time.Time `json:"end_date,omitempty"`

	// Location Venue or location
	Location *string `json:"location,omitempty"`

	// Name Event name
	Name string `json:"name"`

	// StartDate Event start date and time (ISO 8601)
	StartDate time.Time `json:"start_date"`

	// Status Event status
	Status EventStatus `json:"status"`

	// Timezone IANA timezone identifier
	Timezone *string `json:"timezone,omitempty"`
}

// Event defines model for Event.
type Event struct {
	// CheckedInCount Number of checked-in participants
	CheckedInCount *int `json:"checked_in_count,omitempty"`

	// CreatedAt Creation timestamp (ISO 8601)
	CreatedAt *time.Time `json:"created_at,omitempty"`

	// Description Event description
	Description *string `json:"description,omitempty"`

	// EndDate Event end date and time (ISO 8601, must be after start_date)
	EndDate *time.Time `json:"end_date,omitempty"`

	// Id Event unique identifier
	Id *openapi_types.UUID `json:"id,omitempty"`

	// Location Venue or location
	Location *string `json:"location,omitempty"`

	// Name Event name
	Name string `json:"name"`

	// Organizer Event owner user details (included in detail views only)
	Organizer *struct {
		Email *openapi_types.Email `json:"email,omitempty"`
		Id    *openapi_types.UUID  `json:"id,omitempty"`
		Name  *string              `json:"name,omitempty"`
	} `json:"organizer,omitempty"`

	// OrganizerId Event owner user ID
	OrganizerId *openapi_types.UUID `json:"organizer_id,omitempty"`

	// ParticipantCount Total registered participants
	ParticipantCount *int `json:"participant_count,omitempty"`

	// StartDate Event start date and time (ISO 8601)
	StartDate time.Time `json:"start_date"`

	// Status Event status
	Status EventStatus `json:"status"`

	// Timezone IANA timezone identifier
	Timezone *string `json:"timezone,omitempty"`

	// UpdatedAt Last update timestamp (ISO 8601)
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
}

// EventListResponse defines model for EventListResponse.
type EventListResponse struct {
	Data []Event        `json:"data"`
	Meta PaginationMeta `json:"meta"`
}

// EventStatsResponse defines model for EventStatsResponse.
type EventStatsResponse struct {
	ByStatus              *map[string]int    `json:"by_status,omitempty"`
	CheckedInParticipants int                `json:"checked_in_participants"`
	CheckinRate           float32            `json:"checkin_rate"`
	EventId               openapi_types.UUID `json:"event_id"`
	TotalParticipants     int                `json:"total_participants"`
}

// EventStatus Event status
type EventStatus string

// ListResponse defines model for ListResponse.
type ListResponse struct {
	// Data Array of items
	Data []map[string]interface{} `json:"data"`
	Meta PaginationMeta           `json:"meta"`
}

// LoginRequest defines model for LoginRequest.
type LoginRequest struct {
	// Email Email address
	Email openapi_types.Email `json:"email"`

	// Password User password
	Password string `json:"password"`
}

// LogoutResponse defines model for LogoutResponse.
type LogoutResponse struct {
	// Message Confirmation message
	Message string `json:"message"`
}

// PaginationMeta defines model for PaginationMeta.
type PaginationMeta struct {
	// Page Current page number
	Page int `json:"page"`

	// PerPage Items per page
	PerPage int `json:"per_page"`

	// Total Total number of items
	Total int `json:"total"`

	// TotalPages Total number of pages
	TotalPages int `json:"total_pages"`
}

// Participant defines model for Participant.
type Participant struct {
	// CheckedIn Check-in status
	CheckedIn *bool `json:"checked_in,omitempty"`

	// CheckedInAt Check-in timestamp (ISO 8601)
	CheckedInAt *time.Time `json:"checked_in_at"`

	// CreatedAt Creation timestamp (ISO 8601)
	CreatedAt *time.Time `json:"created_at,omitempty"`

	// Email Email address (unique per event)
	Email openapi_types.Email `json:"email"`

	// EmployeeId Employee or staff ID
	EmployeeId *string `json:"employee_id"`

	// EventId Associated event ID
	EventId *openapi_types.UUID `json:"event_id,omitempty"`

	// Id Participant unique identifier
	Id *openapi_types.UUID `json:"id,omitempty"`

	// Metadata Custom participant data (max 10KB JSON, not included in list responses)
	Metadata *map[string]interface{} `json:"metadata,omitempty"`

	// Name Participant full name
	Name string `json:"name"`

	// PaymentAmount Payment amount (decimal, 2 places)
	PaymentAmount *float64 `json:"payment_amount"`

	// PaymentDate Payment date/time (ISO 8601)
	PaymentDate *time.Time `json:"payment_date"`

	// PaymentStatus Payment status
	PaymentStatus *PaymentStatus `json:"payment_status,omitempty"`

	// Phone Phone number in E.164 format
	Phone *string `json:"phone"`

	// QrCode QR code token (unique)
	QrCode *string `json:"qr_code,omitempty"`

	// QrCodeGeneratedAt QR code generation timestamp (ISO 8601)
	QrCodeGeneratedAt *time.Time `json:"qr_code_generated_at,omitempty"`

	// QrEmail Alternative email for QR code distribution
	QrEmail *openapi_types.Email `json:"qr_email"`

	// Status Participant status
	Status ParticipantStatus `json:"status"`

	// UpdatedAt Last update timestamp (ISO 8601)
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
}

// ParticipantStatus Participant status
type ParticipantStatus string

// PaymentStatus Payment status
type PaymentStatus string

// ProblemDetails RFC 9457 Problem Details - all fields are optional
type ProblemDetails struct {
	// Code Machine-readable error code (extension for backward compatibility)
	Code *string `json:"code,omitempty"`

	// Detail Human-readable explanation specific to this occurrence
	Detail *string `json:"detail,omitempty"`

	// Errors Validation errors (extension for validation problems)
	Errors *[]ValidationError `json:"errors,omitempty"`

	// Instance URI reference identifying the specific occurrence of the problem
	Instance *string `json:"instance,omitempty"`

	// Status HTTP status code
	Status *int `json:"status,omitempty"`

	// Title Short, human-readable summary of the problem type
	Title *string `json:"title,omitempty"`

	// Type URI reference identifying the problem type
	Type *string `json:"type,omitempty"`
}

// RefreshTokenRequest defines model for RefreshTokenRequest.
type RefreshTokenRequest struct {
	// RefreshToken Valid refresh token obtained from login or previous refresh
	RefreshToken string `json:"refresh_token"`
}

// RegisterRequest defines model for RegisterRequest.
type RegisterRequest struct {
	// Email Email address (must be unique)
	Email openapi_types.Email `json:"email"`

	// Name Full name
	Name string `json:"name"`

	// Password Password (minimum 8 characters)
	Password string `json:"password"`

	// Role User role
	Role UserRole `json:"role"`
}

// UpdateEventRequest defines model for UpdateEventRequest.
type UpdateEventRequest struct {
	// Description Event description
	Description *string `json:"description,omitempty"`

	// EndDate Event end date and time
	EndDate *time.Time `json:"end_date,omitempty"`

	// Location Venue or location
	Location *string `json:"location,omitempty"`

	// Name Event name
	Name *string `json:"name,omitempty"`

	// StartDate Event start date and time
	StartDate *time.Time `json:"start_date,omitempty"`

	// Status Event status
	Status *EventStatus `json:"status,omitempty"`

	// Timezone IANA timezone identifier
	Timezone *string `json:"timezone,omitempty"`
}

// User defines model for User.
type User struct {
	// CreatedAt Creation timestamp (ISO 8601)
	CreatedAt *time.Time `json:"created_at,omitempty"`

	// Email Email address (unique)
	Email openapi_types.Email `json:"email"`

	// Id User unique identifier
	Id *openapi_types.UUID `json:"id,omitempty"`

	// Name Full name
	Name string `json:"name"`

	// Role User role
	Role UserRole `json:"role"`

	// UpdatedAt Last update timestamp (ISO 8601)
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
}

// UserRole User role
type UserRole string

// ValidationError defines model for ValidationError.
type ValidationError struct {
	// Field Field name that caused the error
	Field string `json:"field"`

	// Message Field-specific error message
	Message string `json:"message"`
}

// CheckInIDParam defines model for CheckInIDParam.
type CheckInIDParam = openapi_types.UUID

// EventIDParam defines model for EventIDParam.
type EventIDParam = openapi_types.UUID

// OrderParam Sort order (ascending or descending)
type OrderParam string

// PageParam defines model for PageParam.
type PageParam = int

// ParticipantIDParam defines model for ParticipantIDParam.
type ParticipantIDParam = openapi_types.UUID

// PerPageParam defines model for PerPageParam.
type PerPageParam = int

// SortParam defines model for SortParam.
type SortParam = string

// BadRequest RFC 9457 Problem Details - all fields are optional
type BadRequest = ProblemDetails

// Conflict RFC 9457 Problem Details - all fields are optional
type Conflict = ProblemDetails

// Forbidden RFC 9457 Problem Details - all fields are optional
type Forbidden = ProblemDetails

// InternalError RFC 9457 Problem Details - all fields are optional
type InternalError = ProblemDetails

// NotFound RFC 9457 Problem Details - all fields are optional
type NotFound = ProblemDetails

// RateLimitExceeded RFC 9457 Problem Details - all fields are optional
type RateLimitExceeded = ProblemDetails

// ServiceUnavailable RFC 9457 Problem Details - all fields are optional
type ServiceUnavailable = ProblemDetails

// Unauthorized RFC 9457 Problem Details - all fields are optional
type Unauthorized = ProblemDetails

// ValidationErrorResponse RFC 9457 Problem Details - all fields are optional
type ValidationErrorResponse = ProblemDetails

// GetEventsParams defines parameters for GetEvents.
type GetEventsParams struct {
	// Page Page number (min 1)
	Page *PageParam `form:"page,omitempty" json:"page,omitempty"`

	// PerPage Items per page (min 1, max 100)
	PerPage *PerPageParam `form:"per_page,omitempty" json:"per_page,omitempty"`

	// Sort Sort field name
	Sort *SortParam `form:"sort,omitempty" json:"sort,omitempty"`

	// Order Sort order (asc or desc)
	Order *GetEventsParamsOrder `form:"order,omitempty" json:"order,omitempty"`

	// Name Filter by event name (partial match)
	Name *string `form:"name,omitempty" json:"name,omitempty"`

	// Status Filter by event status
	Status *EventStatus `form:"status,omitempty" json:"status,omitempty"`
}

// GetEventsParamsOrder defines parameters for GetEvents.
type GetEventsParamsOrder string

// LoginUserJSONRequestBody defines body for LoginUser for application/json ContentType.
type LoginUserJSONRequestBody = LoginRequest

// RefreshTokenJSONRequestBody defines body for RefreshToken for application/json ContentType.
type RefreshTokenJSONRequestBody = RefreshTokenRequest

// RegisterUserJSONRequestBody defines body for RegisterUser for application/json ContentType.
type RegisterUserJSONRequestBody = RegisterRequest

// PostEventsJSONRequestBody defines body for PostEvents for application/json ContentType.
type PostEventsJSONRequestBody = CreateEventRequest

// PutEventsIdJSONRequestBody defines body for PutEventsId for application/json ContentType.
type PutEventsIdJSONRequestBody = UpdateEventRequest

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Authenticate user
	// (POST /auth/login)
	LoginUser(c *gin.Context)
	// Logout user
	// (POST /auth/logout)
	LogoutUser(c *gin.Context)
	// Refresh access token
	// (POST /auth/refresh)
	RefreshToken(c *gin.Context)
	// Register a new user
	// (POST /auth/register)
	RegisterUser(c *gin.Context)
	// List events
	// (GET /events)
	GetEvents(c *gin.Context, params GetEventsParams)
	// Create event
	// (POST /events)
	PostEvents(c *gin.Context)
	// Delete event
	// (DELETE /events/{id})
	DeleteEventsId(c *gin.Context, id EventIDParam)
	// Get event details
	// (GET /events/{id})
	GetEventsId(c *gin.Context, id EventIDParam)
	// Update event
	// (PUT /events/{id})
	PutEventsId(c *gin.Context, id EventIDParam)
	// Get event statistics
	// (GET /events/{id}/stats)
	GetEventsIdStats(c *gin.Context, id EventIDParam)
	// Basic health check
	// (GET /health)
	GetHealth(c *gin.Context)
	// Liveness probe
	// (GET /health/live)
	GetHealthLive(c *gin.Context)
	// Readiness probe
	// (GET /health/ready)
	GetHealthReady(c *gin.Context)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandler       func(*gin.Context, error, int)
}

type MiddlewareFunc func(c *gin.Context)

// LoginUser operation middleware
func (siw *ServerInterfaceWrapper) LoginUser(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.LoginUser(c)
}

// LogoutUser operation middleware
func (siw *ServerInterfaceWrapper) LogoutUser(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.LogoutUser(c)
}

// RefreshToken operation middleware
func (siw *ServerInterfaceWrapper) RefreshToken(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.RefreshToken(c)
}

// RegisterUser operation middleware
func (siw *ServerInterfaceWrapper) RegisterUser(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.RegisterUser(c)
}

// GetEvents operation middleware
func (siw *ServerInterfaceWrapper) GetEvents(c *gin.Context) {

	var err error

	c.Set(BearerAuthScopes, []string{})

	// Parameter object where we will unmarshal all parameters from the context
	var params GetEventsParams

	// ------------- Optional query parameter "page" -------------

	err = runtime.BindQueryParameter("form", true, false, "page", c.Request.URL.Query(), &params.Page)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter page: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "per_page" -------------

	err = runtime.BindQueryParameter("form", true, false, "per_page", c.Request.URL.Query(), &params.PerPage)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter per_page: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "sort" -------------

	err = runtime.BindQueryParameter("form", true, false, "sort", c.Request.URL.Query(), &params.Sort)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter sort: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "order" -------------

	err = runtime.BindQueryParameter("form", true, false, "order", c.Request.URL.Query(), &params.Order)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter order: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "name" -------------

	err = runtime.BindQueryParameter("form", true, false, "name", c.Request.URL.Query(), &params.Name)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter name: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "status" -------------

	err = runtime.BindQueryParameter("form", true, false, "status", c.Request.URL.Query(), &params.Status)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter status: %w", err), http.StatusBadRequest)
		return
	}

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetEvents(c, params)
}

// PostEvents operation middleware
func (siw *ServerInterfaceWrapper) PostEvents(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostEvents(c)
}

// DeleteEventsId operation middleware
func (siw *ServerInterfaceWrapper) DeleteEventsId(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id EventIDParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.DeleteEventsId(c, id)
}

// GetEventsId operation middleware
func (siw *ServerInterfaceWrapper) GetEventsId(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id EventIDParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetEventsId(c, id)
}

// PutEventsId operation middleware
func (siw *ServerInterfaceWrapper) PutEventsId(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id EventIDParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PutEventsId(c, id)
}

// GetEventsIdStats operation middleware
func (siw *ServerInterfaceWrapper) GetEventsIdStats(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id EventIDParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetEventsIdStats(c, id)
}

// GetHealth operation middleware
func (siw *ServerInterfaceWrapper) GetHealth(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetHealth(c)
}

// GetHealthLive operation middleware
func (siw *ServerInterfaceWrapper) GetHealthLive(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetHealthLive(c)
}

// GetHealthReady operation middleware
func (siw *ServerInterfaceWrapper) GetHealthReady(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetHealthReady(c)
}

// GinServerOptions provides options for the Gin server.
type GinServerOptions struct {
	BaseURL      string
	Middlewares  []MiddlewareFunc
	ErrorHandler func(*gin.Context, error, int)
}

// RegisterHandlers creates http.Handler with routing matching OpenAPI spec.
func RegisterHandlers(router gin.IRouter, si ServerInterface) {
	RegisterHandlersWithOptions(router, si, GinServerOptions{})
}

// RegisterHandlersWithOptions creates http.Handler with additional options
func RegisterHandlersWithOptions(router gin.IRouter, si ServerInterface, options GinServerOptions) {
	errorHandler := options.ErrorHandler
	if errorHandler == nil {
		errorHandler = func(c *gin.Context, err error, statusCode int) {
			c.JSON(statusCode, gin.H{"msg": err.Error()})
		}
	}

	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandler:       errorHandler,
	}

	router.POST(options.BaseURL+"/auth/login", wrapper.LoginUser)
	router.POST(options.BaseURL+"/auth/logout", wrapper.LogoutUser)
	router.POST(options.BaseURL+"/auth/refresh", wrapper.RefreshToken)
	router.POST(options.BaseURL+"/auth/register", wrapper.RegisterUser)
	router.GET(options.BaseURL+"/events", wrapper.GetEvents)
	router.POST(options.BaseURL+"/events", wrapper.PostEvents)
	router.DELETE(options.BaseURL+"/events/:id", wrapper.DeleteEventsId)
	router.GET(options.BaseURL+"/events/:id", wrapper.GetEventsId)
	router.PUT(options.BaseURL+"/events/:id", wrapper.PutEventsId)
	router.GET(options.BaseURL+"/events/:id/stats", wrapper.GetEventsIdStats)
	router.GET(options.BaseURL+"/health", wrapper.GetHealth)
	router.GET(options.BaseURL+"/health/live", wrapper.GetHealthLive)
	router.GET(options.BaseURL+"/health/ready", wrapper.GetHealthReady)
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/+x9eXPbOLL4V0Fxf1U/Z54kS75iq+pVreJjRxlfseXMZCYpBSJbEmISYADQtjLl7/4K",
	"B0lQJHV4nGyyO/8kFomj0egbjeafns+imFGgUnjdP70YcxyBBK5/HU7Bv+3T/tGleqyeBCB8TmJJGPW6",
	"5n2TUJRQ8jkBRAKgkowJcLRxc9M/euE1PKIaxlhOvYZHcQRe1/NJ4DU8Dp8TwiHwupIn0PCEP4UIq0ng",
	"AUdxqFru77dhf6fdbsLWwai50wl2mvhlZ6+5s7O3t7u7s9Nut9tewxszHmHpdb0k0UPLWax6C8kJnXiP",
	"jw3v+A6orF2HfrvmIlZew+7uM63hggfAa1ZwzbhETDVAG1j4iHGkGmSwf06Az3LgdUvPhTeAMU5CNb/q",
	"5zUWjw80IHSSzmJ+qbmAJpHX/cPD2RDeh4aDCzt2eW2XeAI1S1OvEE2ikZo7IhR16lYV4wlUL6rjANFp",
	"eBGhJFKQdjJYCJUwAW6B4ZL4JMYLSMZpsybhxCtTzsuXz0Q5l4puahHclxAJFANHCoEWxw0U4QfUabdr",
	"kQ18WI/wrbaDcfUjwg8W5e320g1Q1LaI0McEwgBpQKqBE4zLGvL2OWAJwRCrBjmuC4/nMfio9kvEjArQ",
	"cvEVDq7gcwJCql8+oxKo/hPHcUh8rGDd/CQUwM5+qpaBGvdV72h4dfzm5vh6oLlEYhJ6XW8wBcTNsMhn",
	"iVohk2gEKKEBcCEZC1CQAJIMEXqHQxIgMaMSP2gkCImpr0bfxDHZvOtswp0W6g1PSCwT4XV3FOYlkXq9",
	"r3CA0jVkC55KGYvuphqhBV8+c0JbPos2Y85GIURic4SDpoXQe3TR+/84jL2u94/NXJtsmrdi89L0PtLL",
	"FAabxT1VsKQLb2ZrIzROlMxBEQ4ViUPWSM19yOg4JP7TNuDw4vzktH9YwH4PxQ5L3xM5RXJKBIIIkxAR",
	"gXDIAQczxGFChAQOARozbhspXC/ahs3O1vamM0FxXw7yfcnWtfKm+GmPZ9yRKxAs4T6gdHC0ESQGs9BQ",
	"D4XkmFCJ7ggLNbZfqOlPGB+RIAD6pF05ubh61T86Oj53t+UdS1DANCdM8R0oMRURIQijig+w74MQZg+4",
	"hXnZNhQwv51jPgd+ZdSPsy7PiPs+Fcl4THyibJJ8uUKtNwauWMEsGPu6x2PD61MJnOLwmHPGn4T7/vng",
	"+Oq8dzo8vrq6uCrwhbLu4CEGX0KAQM2AmO8nnEPQQpchYAFI8hnCE0woCrEE3lpRIu26EildBLoGfgcc",
	"mcWsvBfEdm9qEJ93QyxgwgCWTXDO5AlLaPAkjJ9fDIYnFzfnRzUqQCFbm6X3WGjyH+up1iHunRy5GUOf",
	"M4lO7EgrYpYy2TSTPyNSiytNeXdusY8N7wpLOCURkccPPkAAT0P24OJieNY7f5eq3WsX6WoKFKo5ENhJ",
	"1iRsnMjpZsgmhLr433LE+oAxdIbpLNW5YnX0S8aaEaazVPOKZxX05bV7DW8KOLAu4G/NbAea+t+ySXZm",
	"TLt0O40peU9owO69SsNWm4AVZp8715XSu1SZX6X5slf5jIQiLZG05q6feJVpBVQs8YaSByRJBELiKEb3",
	"U6AWa1x1EDXr3Nve2365tV+5XG3nAr8jPtxQfIdJiEcpza5J3dfHV2/7h8fDm/Pe217/tPfq9HheqAgz",
	"k7JjJEQx45iTcIaSfOY1SX4KOJTTTW0SFSS6o1Ht8pC7vpXJ3kLcdEB8TsJPYavBhprqhiq+Zpx8eaLU",
	"uTnv3Qx+vrjq/35ckPJ9a+EyjuAhVl4gUjMp79GMiSS71XbIamZ9J0d5AeaVcZ24vZ4Ryb3iqlKfVy1c",
	"rzC19dWcb9Ufup1W/FfW33oS4t/2TvtHvUH/4rxsz1xQ0E4F44DusjmNUheZZaN8Q/3E6/7xp6f9Te0Q",
	"Yi6HAZaKjiMQQvm/Xe9aPUbqMYoSoV02QpGcAhonMuGKmPIxrNea9z7HkebLLCLw+OEJ/lyOvnUNpxwJ",
	"z286WW3nInqMSagWmc2i1YyiFHfLY85i4JIYf9uY+UPDFSXh/PrXQeYIaKpSblnvsj/HVAV3H2avp6N/",
	"+eSCvO7ffOl3zklf9OnVrn/Y3+vfxr+9PXx90ILZ6y/Br31yQfqd88Gr8OLozf3ZYSc8+xSS08Gbh9+P",
	"3sh3A//hnLTb50fvts4HN+3zo9792VGPnB6+no22HsL+J0ZG26/pu193Y4jezvrknvz+2/S+/4k9nH96",
	"c38xuO2cferdj9+08MjvbG0HMN7Z3ZtMycv9g0+3YbuzFVG2vbMbf+Z7L/eFTA7anbv7h63tndmXcqhC",
	"rVFJFDEktBD3OFDEMsedLs50Nyt8SKQJWIDPaCDQxkG7jf4XdXZRRGgiQbxwUXlQpd0aHocxBzGt27Mr",
	"89rZMDaSVqtTuC/sp/jmO9eG317pnfOjt5Efvf2CD/uiH73dUZOcDd61z45ud88H/fuzn9uth5ef9n/5",
	"/NvWu+3fd/DuaM9/GezDwbg96Uy3yPanndvdcC96SffZQdyu2jC9xqF57AaqXgHmOkg7ZzhrjKnmaAOH",
	"93gm0Hvb9r1X2Jl8hNKciQC+jLtvhLWP8lDlH0VOnN/lwloKlGhn/JCBwkafwIQs7BlDmel99QKCIaFD",
	"LBecPeRm2Ub/+gLt77U7DWTRiM4vft14UcTKVntrt9nZanZ2B+2Dbme3227/7kZRlRxvqkH1+nBwQcNZ",
	"GqUtIdIBcjSrsBuFMoWnmeMOAfIt3F5jbr0kKEZ/9/aeI/qbhkTdka8lHo+R3t+qaHHNovMt00sgdBiB",
	"nLJgGR3ZDT4zjbWKUJbXkNAx08I9CIhCFw4vHXyYqYvYPNIdUQQSB1hitBHhB7T7yyv0+vrivLDJ2lAY",
	"3gEXpmen1W61vWxqu6KIjYg2SZlQwuviWrPj/Gq13h2a3ZkToEIwn+DcVe8fFSjtiSc/S4muCpb6o7gC",
	"SE88UFsKkhPaHNaCB4EC0A2zziHsiQceS6CbE2G6S7apJdAbc4KnRO4LhNhZxhC5GP/MtVHaqNsvO2p+",
	"dpZ1iDBNcFg8QMtelnbgUB9g6JNM52yiKGIKIFQfgrrP3Il7VAGDJPhTykI2menQMHCgvoH14RToRE51",
	"UK9dZZfQwFjONRMDDYwJjWlgTBBHnKdmNR5L4Cg3w2sle2e/224vkuwl+EJmzcQSfG+BJtpnyJq4k15j",
	"ik44pj4RPkOHjKrVKDPqEKjU3FfEzQIJXYUW6y7k8w3An6ppLO6RWnRxkq3dXX3Clv7uVEzpeDI1E4vc",
	"qSnvyCKNuibeU29msRLRMF2bpkpIkwi+MFoBfL933kPp6zop2IuAEx9vnjIx7NEJhCC8ZWLDbkTBBbSw",
	"V0kEDfBCo8ZnCa2wa87NSTcbI79SZhasYfcotV0rCB2z3DnmLMto9S51AOYsqqoN7zTb+4NOe8mGL1Ud",
	"fwuleuaoUqU1ySrfxPL47xKSjE8wJV+Mq1Q1L7unwJFybZCJLwm0QagfJgEEyoM2D9EdgXuBGA1nL0pW",
	"vz5eLprnn9iU/tP+bPkscjfKNK+llG/hPbxmU4qOGDzNd8hwOqynbQetcwbiE1e1lvlaI5cHTOLQPfyv",
	"k8md3bWl8n+UNk4N354geHPAbmesZPw+n5JueEkc1Gq0UywkMg2+qVKr8jgKhN94kjlxSoR0g6Q4DC/G",
	"OkC9aLMKvR4bJZ8ASx3oJRKi1Tbe8ZIx53im1zsH8YcUZkUloj6yO5oNc5KrjgT8WcEwbsgfUx/CUGF6",
	"t+Ep/U94pH7tKy0CVGJJ7jRbPtaFMow9VuBnV+K93K20pKxXyC3X5jZZS3XIyGYcMjenzCQyzscVnjtb",
	"tOFJJa7q11R3BOuSreMjV4xWj7s53NSS83W28TUST73N/eKA47FCZJyMQiKm+oyG0QlTC27oNOYQpH6a",
	"k0TBd3Y7lvA1z1vVTDIX/1HUryx1wzuNnIdKCy7yS8OLQC4/XsETQrUtdaZaz2+PhsmOVIXjUzYhtDYU",
	"kNkdc7jX2W44CDiIYtw9k19rmyYxFuKe8aAmPJq9LhiM4CccLv8pxH1bv8qmcZovlropPFmHGiSxZMHG",
	"Z8d0JWfJCBrjMKWtCitIdKh8nIThDIVsMoEAsUQuBTsdqwraOYooQRtXg2ozI+I8kdpbPR+6kWf6Lskc",
	"9p6c8msFTJ3RRTOXOGW0emOrZmi9ALF8AtPMmWB/8fBzm2fR4ORGm4UVoaje2kyCLooaLAj85gIzhX2M",
	"QwG1xsqIsRAwndOC6x61PP1shSahTXkxYC0/a/n+YherSFG0YX11xSdapxYB+oQpLJOpazquEMUhmwFU",
	"+1j2pXLWhT4JmnOyjs8u2+1OxazzO1ae94c4Kll4deMbnEcYnZ2aFKsffx0mQrKocH6SH4N12vYcrKHz",
	"J90oREiEzlMz9xfmzsmU3YHpLI+Z8Fi5awQk5rMhBwW0zjMWSr7dwUS9IJgqIcaZoRc6IRSssJ2Xa9Vh",
	"G3cLlIYsR3BeYwroOiL65sya5B/jWaQIEUfVrvyleY/Me7QRgE8iHDbQFopD7M/hSKuYXDywxKSx1TBD",
	"bt+nUFS79SkM6u3mcnfeyKut7nZ7HZFai5nV3HwLY+7ox9PKmPulepwqUULRcauzt4MshO5a/qfT3N3d",
	"bbZNovJSaD/zoUnomp/wzRVSL2z2iJWvRbTBnRymQmUYczlMeXnoptmswqwWiuEEKPBaBZSCZFt9e1X0",
	"mQ9rtFEv1Pnryg22t1nGjKMU4ICoMUZJKWar9FLrnvHbdZXT0n1dlfoyGZFT4I8S7XF851S0WWxlZlpK",
	"3UusQddLTkNreVijsUCwljxot1seKHH9ZTWcHxI67zq7rUvbWRQTBUATGmMSVEBphF8Jwqy9/q8AQvaq",
	"PH8xDbGca3ZyiA52dl8i2xDZlqiJcBiay4QCYQ6IxUYTl6L01WLoDPtTQqGp6EMRvL0do9lqAx4kUH1P",
	"SXHbCPu395gHSOtbSUYkJHJWJEn3RkjFKZmsZO6fkwhTB4KHOMTGRUQiBp+MiY8kMxeGbHKrORxzDktW",
	"uHRSNvVsdmzpHKiUUjuHCScVNE1BfeGGThaJhLkc4arASp44Wwo2XPURh/REyFp8M0InOlM3Q1aOJOUP",
	"qlcWzALOKm/e5HYgJ81sqsVh9rndHAwuLVcgm+iRzWnu85TdW5MAXLonO2VcNtC0SB4iiSLMZ3MrQ1nC",
	"Xrq8RdeFnBhjlrO4Op5rp1z9FlIR0ZUBlZJAtfmmOnmyNia2JGdVUx/ihcxVk7UKARpzFiF9BUj5VTGH",
	"O8ISkbb+T85gnVN/RSR+qNwLc4b2l2KTaCM9fq+y/lYOVq7pWVR7MyfVHkx+Trpglq21AqaX9o2+pK8v",
	"Xe0jf4o59iXwotuyWgh1AWT7FZAZj2953vCVarc0IJvZRnrYKlK50dbcMye1fYW0kK+UZfYcSRHfIjHs",
	"O0z2WkEn3Ngk+DlT78eOMhbBSMSzi0BSd47z78lIen6J3PnLcu8HclMtDSyVw+naqrde93Oq/wSRvt+Q",
	"509pzh+Pix6d+7qE8XlTv8Sn9j5daeez0jBITrFEPk4EBNr0BHsvzrHE6o4sa4/99PDNzFkwDl/V8V96",
	"xzMLuER4+dmfWVNjwRmgkqFKrxM5u1Z0Z7Mo9EWfXqLIN/11kpLI618HJQe8dGWuaMcqbBlbFmgQM0Jl",
	"6z3tm5ByerWxZ2+MGoFobowjLLroo7l2hN4n7fa2r4fXf8LH9zS9J63Pn+ZuJykHwNwhTG+G+IxKbEq8",
	"WBHoiSSOGZf/zD2EvOgPfHlzRSi6Nk1KqaVWfUWY4gmY+C8NdBgsO0GbCQkR6l3239P39B//QBd3wO8I",
	"3Kufyku2M/Qu+7ogjHbmOUyVd3sH1nN2xo9DLG25DqyMBuWCCZSRvcJ99z1tIpO6r8Exvc1QQr1LjeVC",
	"uplumgXuII3l6Q4Djv3bbE2maRq6RBwUanS7MzOTzrLDvk56M42LtyYtJnqlhwofChGJAIEUPdltN1f2",
	"tKtfHKmFUgpS5JPe/62lpa6a5OPHj+9p4W0XFcjLvY9mqMx2ek9/+slclRvMYhDdn35Si7ZXHvWLLjIO",
	"nYI0v9tocG5cvFKzlyjAM5Gi5LLfPCFcSHQEdxCyWO25wQwR6CIGqtCTigobkgF+BwJhoZf900/XhE5C",
	"QNfG2WZjNOCJnKKN6+uLwYuffjJYDEONaMUNytAXrffUlkhRm95AfqhLxVwf/SIaegedEItVTjq6lQWw",
	"UyYnYg68RCg3/SPDMWmqsSdAP7bscnWlCF0kgdCJeqZgygowqPHV2E1dFUEJXKadYM1mo0RACzmlJhSD",
	"p7kTRBQOq9JzKksFQjPIx1IVio9dtKDsRKlPVjLiYxetUj6iYgABatJlhSAUYk5Ymg4MgUaKaSEaSIAh",
	"/j8KyEQB85PIxGYZ/bDR2gyYL3SESfUemt6tKHjR0hI0JD7YZBUr+c76SsQnPHTiKCwGaoI4LcYnm7aT",
	"2FRt87CRl4s0r+HNX5h7bHhqGBwTr+ttt9qtbe2+yanWOm7ZE6WemaiwdhzBoQjfyBtdXctoRkWvqUOI",
	"fA7aesShEUUcZMKpES9GrrRczj4lY1B7UcncOUubC8z2NvOLCgY3bI029to7+4WWaqprq27tJDkVF4l8",
	"xJUgHjPFx1hK7N9qUXJiqABLCVFs+cQmAyneTnU5ihglknHNWk2UuvmmvQ4Zcwgse458PoulpgRlD2mi",
	"6QfKsFQ7YW91WtJ+xYLZehUUUkVbF0HJYxPzAYaVywYUEtMeizaQslznq+1ttdvrraFYLuA7vutfvCRt",
	"rtLPBSG/v2hhdnLqXlzP75qnV8tdP7rOjVlGbMrXXNVztKLQ8fFseoLrZrh+WTVQjyuTcaFkRUXtC03m",
	"SGRpgIpBdgwpVw2bkfymU11Sd+k8saKbroIyPLw6Pjo+H/R7p9dVNWiMFGaFNMyVK1x9v5Vn0uU5GkUj",
	"c+tgOf7LJcceG97uKjtXrMPnOmte948PDc8ev8ypRa0TFcrwRCfZKIx4H1TvDO0skfUq1q5VK1hlXaSm",
	"jBr2/4uin2e0qnOC0TKWvLXalbrBQWBUG0Yc7mww0iQRqd4+pogyFDI6Aa7j7wKCglq+ynoVFbM1+QUi",
	"UQQBwRLCWVoBSHGlq5nztsX3gwo4ryAgojnC/q2uJFcA2Yx5x251U92Xa/sPjULs36omSrFSSUKFO8IR",
	"xTLhOHQKopi1HRor23K8OcAlmWNh34qprtsaQAgSkJCMZ/OWW3EICAdfqjUYbzvGEyi3o0xZl5LP0qqk",
	"gISOb9hxqwwBlsjMEvgrqtQpclSTz7yO2ndTraslJktkSWR2ljPezZwY+evcWgyq/PHhscC+FtIljJse",
	"/tVy7vGDP8V0og3ju4rTRe3+lerhlJkYxZjwlvU805BNSj4jQD4OlRWqvRVFPrhU+QdSy7pgGqM8Cmfp",
	"/Cy982rhff3rIHtsqxXbkmbzj62rX+JPR24w6U71islpCmlpxdbjVD3MVBfhPE7KwuMc7tPeupasaT1X",
	"+aiKodzT479iXP8ott3KPF11rP5fatGbil0/pEVvyoz9bdEvs+iNmLLbCYGjqMLZv8m6vzo+uTq+/nk4",
	"uPilWDe7osZkQTwuMPPznJUfyNCvXef3ZPWnytXVvwvtBxP7rzcgzMmBsEaCG8t3bEUT4lWIYSG0UM+U",
	"q8ho195pN+qu8Z6qPnokDj4QHa6uKE4qMmfAteYTYQKcvcu+tSeyjJUroxEihbzUmKjIYVHPr43hoo9/",
	"CEVJHAP3sYAGCtl9+qdJN7cRb71GHBbGUbObI/IbfTJNQaQTm8fFBCKEfc6UqRGGevn2JMAEIHfaByit",
	"zI/IOI1d2i8CwAMRstpuMBv4tYNyZUlZH6arkKJrqPti5tZKqr7zd/Du7+Ddj6bqTVpDXuzjSaq+rqSx",
	"7n/wJL1/fNbrnw57p1fHvaN3w+Pf+nO17HvOAYvz+ZKipFqo+63K+a4/T3JctajvS9HbU/tcMVfreVvU",
	"ufunN6mqO/8vkAib2Bsb26wAs7ljEkrghE7sCVp6MbyFLvL8AnveSDhi99R2byCdnmNe4jBslbTWv0Ae",
	"p7Wm3e/B1dQZyZts5h+Zemwsb+x+lGqF9vlHoVZo7HwrTbWeT+JRuEOjmU3Z0NlCGzrBAocowtKf1n31",
	"Ki3bkhFyKaFn2WTZnZfK71alL1fjlEKi5OOHJ3nZa8xUrCRTUVPfDRFykJzAHQRz5Pv9xvQUmFmR9ZRX",
	"7YMPj42FJrhldN26ldq6IudF5Z/0FN8ZI7zEc5dM5Ey3np242gZWlAd9NuttDRKqlOaGL1zisfbHX3Oq",
	"1yOvnfb28k4n7gefvjZBWspKvy1Woshcf2z+SYJHQ5ohVGVuH5kDCUxTCr0whXNSleJjasO0ZoSgTKFm",
	"CEOj/aB8sLBTn3yvR6wwob7JLu0YyBb3yL7ktLJp9lymTOZVNpfuybegOUsotTTXqLdTspQnN7sLj1ii",
	"TJg8Y1bTX73NUUVa7W8lg9Iijrnu+lGI9mvThdpgcHFUoyLXMhcLH+VV88VJ1beXYnvXxBj6GYcoIRbO",
	"dLiJuWoWU2Ph6uCU8Rkr9G1SpLfnV7gVV5ee7WTkWYjdutPPGMX+r+MKS5qrauhNZd4vdvbcWKyJsLrl",
	"nRT5+za3mq4gSnXxxa8uT4slHusNvHwBf8vXevmao+kriFhFkObLbbVUmIa8BYniUKdhh3Ka3km398Z1",
	"YrtOQa+ivp/NBH+R7Iq3ffKLg86NcT3PrPJmepqhXeyxzm2qxTd1aku11n9pjgiUQqwJagWarfg+4KKo",
	"0yssiJ/umBYcDgnZbTdCyX69L9SVUWsI4ZdkBJyCBIFUOwpC6Nv7kF8Kys5HttrtPLsk/dZgzJk+5tLf",
	"TiZ30HpPb4RJ2QpAgjlJcTtQgEB/5nYEiIO+Z6pTy+qJ7NQUM/nKhKahr649rIhlaBPGC52291aosPo0",
	"KjLgfCUaOi1s9RL6MV9/XIGAVEOyPgUR03OWfuo5lkhyPB4Tv/We6qqEQpdAG2GhP1VNwZfkjsiZTRiy",
	"nxsMIAYaAPWJTnOqJ6cr+zXLZ6QnzYaiuqKsArtIaey2isw4BEQsb1h1x7mKnNNvdq4k4RrpCtYkUjNJ",
	"TqTP/VFTZyqTH1lJJv/Z3y51177kOKLAfpVcvYK1ojW+MTtKH+ZKL8DldkF+Ham7uRkyH4dTJmR3v73f",
	"thtREZq/5CxI/PyuHC/da5rDuRrlQ7aeUj0dRxeaRAFzxdOaM6kYEnkE3iKkDNnct0zTm5LZxcR8CH28",
	"Ux7gxs3OyG+J5v101kFFR2M+h2QM/swPobJvFltfVGmx5FxUjVQo5V0er6LOXeEyagET9mtV5VGyirKZ",
	"IDb5JJJj/9YU9LZD2FLiynb9vwAAAP//NePY96yIAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
