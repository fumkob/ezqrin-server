# Check-in Request and Response Schemas

CheckInRequest:
  type: object
  required:
    - method
  properties:
    method:
      $ref: './enums.yaml#/CheckInMethod'
      description: Check-in method - qrcode for QR scanning, manual for manual entry
    qr_code:
      type: string
      minLength: 1
      maxLength: 500
      description: QR code token (required when method is qrcode)
      example: "evt_550e8400_prt_770e8400_abc123def456"
    participant_id:
      type: string
      format: uuid
      description: Participant ID (required when method is manual)
      example: "770e8400-e29b-41d4-a716-446655440000"
    device_info:
      type: object
      description: Device metadata for check-in tracking (max 5KB JSON, optional)
      additionalProperties: true
      example:
        device_type: "mobile"
        os: "iOS"
        os_version: "17.5"
        app_version: "1.2.0"
        device_model: "iPhone 15 Pro"
  example:
    method: "qrcode"
    qr_code: "evt_550e8400_prt_770e8400_abc123def456"
    device_info:
      device_type: "mobile"
      os: "iOS"

CheckInResponse:
  type: object
  required:
    - id
    - event_id
    - participant_id
    - participant
    - checked_in_at
    - checked_in_by
    - checkin_method
    - message
  properties:
    id:
      type: string
      format: uuid
      description: Check-in unique identifier
      example: "880e8400-e29b-41d4-a716-446655440000"
    event_id:
      type: string
      format: uuid
      description: Associated event ID
      example: "550e8400-e29b-41d4-a716-446655440000"
    participant_id:
      type: string
      format: uuid
      description: Checked-in participant ID
      example: "770e8400-e29b-41d4-a716-446655440000"
    participant:
      type: object
      description: Participant basic information
      required:
        - name
        - email
      properties:
        name:
          type: string
          description: Participant full name
          example: "Jane Smith"
        email:
          type: string
          format: email
          description: Participant email
          example: "jane@example.com"
    checked_in_at:
      type: string
      format: date-time
      description: Check-in timestamp (ISO 8601)
      example: "2025-12-15T09:15:00Z"
    checked_in_by:
      type: object
      description: User who performed the check-in
      required:
        - id
        - name
      properties:
        id:
          type: string
          format: uuid
          description: User ID
          example: "660e8400-e29b-41d4-a716-446655440000"
        name:
          type: string
          description: User full name
          example: "Staff User"
    checkin_method:
      $ref: './enums.yaml#/CheckInMethod'
      description: Method used for check-in
    device_info:
      type: object
      description: Device metadata captured during check-in
      additionalProperties: true
      example:
        device_type: "mobile"
        os: "iOS"
        app_version: "1.2.0"
    message:
      type: string
      description: Success message
      example: "Participant successfully checked in"

CheckInListResponse:
  type: object
  required:
    - checkins
    - pagination
  properties:
    checkins:
      type: array
      description: List of check-ins with participant information
      items:
        type: object
        required:
          - id
          - event_id
          - participant_id
          - participant
          - checked_in_at
          - checked_in_by
          - checkin_method
        properties:
          id:
            type: string
            format: uuid
            description: Check-in unique identifier
            example: "880e8400-e29b-41d4-a716-446655440000"
          event_id:
            type: string
            format: uuid
            description: Associated event ID
            example: "550e8400-e29b-41d4-a716-446655440000"
          participant_id:
            type: string
            format: uuid
            description: Checked-in participant ID
            example: "770e8400-e29b-41d4-a716-446655440000"
          participant:
            type: object
            description: Participant information
            required:
              - name
              - email
            properties:
              name:
                type: string
                description: Participant full name
                example: "Jane Smith"
              email:
                type: string
                format: email
                description: Participant email
                example: "jane@example.com"
              employee_id:
                type: string
                description: Employee ID
                example: "EMP001"
                nullable: true
          checked_in_at:
            type: string
            format: date-time
            description: Check-in timestamp (ISO 8601)
            example: "2025-12-15T09:15:00Z"
          checked_in_by:
            type: object
            description: User who performed the check-in
            required:
              - id
              - name
            properties:
              id:
                type: string
                format: uuid
                description: User ID
                example: "660e8400-e29b-41d4-a716-446655440000"
              name:
                type: string
                description: User full name
                example: "Staff User"
          checkin_method:
            $ref: './enums.yaml#/CheckInMethod'
            description: Method used for check-in
          device_info:
            type: object
            description: Device metadata
            additionalProperties: true
            example:
              device_type: "mobile"
              os: "iOS"
    pagination:
      $ref: './responses.yaml#/PaginationMeta'

CheckInStatusResponse:
  type: object
  required:
    - participant_id
    - participant_name
    - event_id
    - event_name
    - checked_in
  properties:
    participant_id:
      type: string
      format: uuid
      description: Participant unique identifier
      example: "770e8400-e29b-41d4-a716-446655440000"
    participant_name:
      type: string
      description: Participant full name
      example: "Jane Smith"
    participant_email:
      type: string
      format: email
      description: Participant email
      example: "jane@example.com"
    event_id:
      type: string
      format: uuid
      description: Associated event ID
      example: "550e8400-e29b-41d4-a716-446655440000"
    event_name:
      type: string
      description: Event name
      example: "Tech Conference 2025"
    checked_in:
      type: boolean
      description: Whether the participant has been checked in
      example: true
    checkin:
      type: object
      nullable: true
      description: Check-in details (null if not checked in)
      required:
        - id
        - checked_in_at
        - checked_in_by
        - checkin_method
      properties:
        id:
          type: string
          format: uuid
          description: Check-in unique identifier
          example: "880e8400-e29b-41d4-a716-446655440000"
        checked_in_at:
          type: string
          format: date-time
          description: Check-in timestamp (ISO 8601)
          example: "2025-12-15T09:15:00Z"
        checked_in_by:
          type: object
          description: User who performed the check-in
          required:
            - id
            - name
          properties:
            id:
              type: string
              format: uuid
              description: User ID
              example: "660e8400-e29b-41d4-a716-446655440000"
            name:
              type: string
              description: User full name
              example: "Staff User"
        checkin_method:
          $ref: './enums.yaml#/CheckInMethod'
          description: Method used for check-in
        device_info:
          type: object
          description: Device metadata
          additionalProperties: true
          example:
            device_type: "mobile"
            os: "iOS"
